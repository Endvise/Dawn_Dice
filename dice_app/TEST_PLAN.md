# DaWn Dice Party - 테스트 계획

## 문서 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| v01 | 2026-01-30 | 초기 테스트 계획 작성 |

---

## 1. 개요

### 1.1 테스트 목적
- 모든 사용자 기능 정상 작동 확인
- 보안 기능 효과성 검증
- 버그 및 취약점 발견

### 1.2 테스트 환경
- **OS**: Windows 11
- **Python**: 3.11+
- **Streamlit**: 1.41.0+
- **Database**: SQLite

---

## 2. 기능 테스트

### 2.1 사용자 회원가입 테스트
| 항목 | 테스트 케이스 | 예상 결과 | 실제 결과 | 통과 여부 |
|------|-------------|----------|----------|----------|
| 10자리 사령관번호 | 10자리 숫자 입력 | 가입 성공 | | ⬜ |
| 9자리 사령관번호 | 9자리 숫자 입력 | 에러 메시지 | | ⬜ |
| 11자리 사령관번호 | 11자리 숫자 입력 | 에러 메시지 | | ⬜ |
| 문자 포함 | 알파벳 포함 입력 | 에러 메시지 | | ⬜ |
| 중복 사령관번호 | 이미 존재하는 번호 입력 | 에러 메시지 | | ⬜ |
| 비밀번호 7자 | 7자 비밀번호 입력 | 에러 메시지 | | ⬜ |
| 비밀번호 불일치 | 확인용 비밀번호 다름 | 에러 메시지 | | ⬜ |
| 블랙리스트 사령관번호 | 블랙리스트에 있는 번호 입력 | 에러 메시지 | | ⬜ |
| 정상 가입 | 모든 조건 충족 | 가입 성공 | | ⬜ |

### 2.2 로그인 테스트
| 항목 | 테스트 케이스 | 예상 결과 | 실제 결과 | 통과 여부 |
|------|-------------|----------|----------|----------|
| 올바른 사용자명/비밀번호 | 정확한 정보 입력 | 로그인 성공 | | ⬜ |
| 잘못된 비밀번호 | 비밀번호 틀림 | 에러 메시지, 실패 횟수 +1 | | ⬜ |
| 5회 실패 | 비밀번호 5회 틀림 | "관리자에게 연락하세요" | | ⬜ |
| 존재하지 않는 사용자 | 없는 사용자명 입력 | 에러 메시지 | | ⬜ |
| 마스터 로그인 | 마스터 계정 로그인 | 마스터 메뉴 표시 | | ⬜ |
| 관리자 로그인 | 관리자 계정 로그인 | 관리자 메뉴 표시 | | ⬜ |
| 사용자 로그인 | 사용자 계정 로그인 | 사용자 메뉴 표시 | | ⬜ |

### 2.3 예약 신청 테스트
| 항목 | 테스트 케이스 | 예상 결과 | 실제 결과 | 통과 여부 |
|------|-------------|----------|----------|----------|
| 정상 예약 (정원 내) | 정상 정보 입력 | 예약 승인 대기중 | | ⬜ |
| 대기자 등록 | 180명 초과 시 | 대기자 순번 부여 | | ⬜ |
| 블랙리스트 예약 | 블랙리스트 사용자 예약 | 블랙리스트 경고 표시 | | ⬜ |
| 서버/연맹 자유 입력 | 자유 텍스트 입력 | 정보 저장 성공 | | ⬜ |
| 예약 취소 | 대기중 예약 취소 | 상태 'cancelled'로 변경 | | ⬜ |

### 2.4 내 예약 현황 테스트
| 항목 | 테스트 케이스 | 예상 결과 | 실제 결과 | 통과 여부 |
|------|-------------|----------|----------|----------|
| 예약 목록 표시 | 로그인 후 확인 | 내 예약 목록 표시 | | ⬜ |
| 대기자 정보 | 대기자 예약 확인 | 대기자 순번 표시 | | ⬜ |
| 필터링 | 상태/블랙리스트 필터 | 필터링된 목록 표시 | | ⬜ |
| 예상 대기 시간 | 대기자 순번 확인 | 예상 일수 계산 | | ⬜ |

### 2.5 관리자 기능 테스트
| 항목 | 테스트 케이스 | 예상 결과 | 실제 결과 | 통과 여부 |
|------|-------------|----------|----------|----------|
| 예약 승인 | 대기 예약 승인 | 상태 'approved'로 변경 | | ⬜ |
| 예약 거절 | 대기 예약 거절 | 상태 'rejected'로 변경 | | ⬜ |
| 참여자 추가 | 새 참여자 추가 | DB에 추가 성공 | | ⬜ |
| Excel 불러오기 | 주사위 명단.xlsx 업로드 | 데이터 일괄 저장 | | ⬜ |
| 블랙리스트 추가 | 사령관번호 등록 | 블랙리스트에 추가 | | ⬜ |
| 공지사항 작성 | 공지사항 등록 | 홈페이지에 표시 | | ⬜ |
| 상단 고정 | 상단 고정 설정 | 공지사항 맨 위에 표시 | | ⬜ |

### 2.6 마스터 기능 테스트
| 항목 | 테스트 케이스 | 예상 결과 | 실제 결과 | 통과 여부 |
|------|-------------|----------|----------|----------|
| 관리자 생성 | 새 관리자 등록 | 관리자 계정 생성 | | ⬜ |
| 비밀번호 초기화 | 관리자 비밀번호 초기화 | 새 비밀번호 생성 | | ⬜ |
| 관리자 삭제 | 관리자 계정 삭제 | 계정 삭제 | | ⬜ |
| 활성화/비활성화 | 관리자 상태 변경 | 상태 업데이트 | | ⬜ |

---

## 3. 보안 테스트

### 3.1 인증 보안
| 항목 | 테스트 방법 | 예상 결과 | 실제 결과 | 통과 여부 |
|------|-------------|----------|----------|----------|
| 비밀번호 해싱 | DB 비밀번호 확인 | 해시된 값만 저장 | | ⬜ |
| 세션 타임아웃 | 60분 이후 로그인 유지 | 자동 로그아웃 | | ⬜ |
| 로그인 실패 제한 | 5회 실패 후 시도 | 계정 잠금 메시지 | | ⬜ |
| 권한 분리 | 사용자가 관리자 페이지 접근 | 접근 차단 | | ⬜ |

### 3.2 SQL Injection 방지
| 항목 | 테스트 방법 | 예상 결과 | 실제 결과 | 통과 여부 |
|------|-------------|----------|----------|----------|
| SQL Injection 시도 | 입력값에 SQL 삽입 | 무시/에러 | | ⬜ |
| Parameterized Query | DB 쿼리 검사 | 파라미터 사용 확인 | | ⬜ |

### 3.3 XSS 방지
| 항목 | 테스트 방법 | 예상 결과 | 실제 결과 | 통과 여부 |
|------|-------------|----------|----------|----------|
| Script 삽입 | <script> 태그 입력 | 이스케이프됨 | | ⬜ |
| HTML 삽입 | <img> 태그 입력 | 이스케이프됨 | | ⬜ |

### 3.4 개발자 도구 방지
| 항목 | 테스트 방법 | 예상 결과 | 실제 결과 | 통과 여부 |
|------|-------------|----------|----------|----------|
| F12 키 | F12 키 입력 | 방지됨/경고 | | ⬜ |
| Ctrl+Shift+I | 개발자 도구 단축키 | 방지됨/경고 | | ⬜ |
| 우클릭 | 마우스 우클릭 | 방지됨 | | ⬜ |
| 콘솔 감지 | console.log() 실행 | 리로드/경고 | | ⬜ |
| 마스터 예외 | 마스터로 로그인 후 F12 | 정상 작동 | | ⬜ |

### 3.5 Secrets 관리
| 항목 | 테스트 방법 | 예상 결과 | 실제 결과 | 통과 여부 |
|------|-------------|----------|----------|----------|
| .gitignore 확인 | .streamlit/secrets.toml 확인 | 커밋 제외됨 | | ⬜ |
| st.secrets 사용 | 코드에서 값 확인 | 올바른 값 반환 | | ⬜ |
| 마스터 비밀번호 | st.secrets 접근 | 올바른 값 반환 | | ⬜ |

---

## 4. 통합 테스트 시나리오

### 4.1 시나리오 1: 신규 사용자 전체 플로우
1. 홈페이지 접속
2. "회원가입" 클릭
3. 10자리 사령관번호, 닉네임, 비밀번호 입력
4. 가입 완료 확인
5. 로그인 페이지로 이동
6. 사령관번호, 비밀번호로 로그인
7. 홈페이지에서 내 정보 확인
8. 예약 신청 페이지로 이동
9. 서버, 연맹 입력 후 예약 신청
10. 내 예약 현황에서 예약 확인

**예상 결과**: 모든 단계 성공, 예약 상태 'pending'

---

### 4.2 시나리오 2: 관리자 예약 승인 플로우
1. 마스터/관리자로 로그인
2. "예약 관리" 페이지 접속
3. 대기 예약 목록 확인
4. 예약 승인 버튼 클릭
5. 승인 완료 확인
6. "참여자 관리"에서 참여자 수 확인
7. 180명 도달 시 새 예약이 대기자로 등록되는지 확인

**예상 결과**: 예약 승인 성공, 참여자 수 증가

---

### 4.3 시나리오 3: 블랙리스트 차단 플로우
1. 관리자로 로그인
2. "블랙리스트 관리" 페이지 접속
3. 사령관번호, 사유 입력 후 블랙리스트 추가
4. 로그아웃
5. 사용자 계정으로 로그인 시도
6. "블랙리스트에 등록된 사용자입니다." 메시지 확인
7. 예약 신청 시도
8. 블랙리스트 차단 확인

**예상 결과**: 모든 단계에서 블랙리스트 차단됨

---

### 4.4 시나리오 4: Excel 불러오기 플로우
1. 관리자로 로그인
2. "참여자 관리" 페이지 접속
3. "Excel 불러오기" 탭 클릭
4. 주사위 명단.xlsx 파일 업로드
5. 시트 목록 확인 (회차별)
6. 첫 번째 시트 선택 후 "불러오기" 클릭
7. 데이터 미리보기 확인
8. "데이터베이스에 저장" 클릭
9. 저장 완료 메시지 확인
10. 참여자 목록에서 추가된 데이터 확인

**예상 결과**: Excel 데이터가 DB에 정상 저장됨

---

## 5. 성능 테스트

### 5.1 로드 테스트
| 항목 | 테스트 방법 | 예상 결과 | 실제 결과 | 통과 여부 |
|------|-------------|----------|----------|----------|
| 페이지 로드 | 각 페이지 로드 시간 측정 | <3초 | | ⬜ |
| 데이터 로드 | 100개 이상 데이터 로드 | <2초 | | ⬜ |
| 검색 | 검색어 입력 후 결과 | <1초 | | ⬜ |

---

## 6. 호환성 테스트

| 브라우저 | 버전 | 예상 결과 | 실제 결과 | 통과 여부 |
|--------|------|----------|----------|----------|
| Chrome | 최신 버전 | 정상 작동 | | ⬜ |
| Firefox | 최신 버전 | 정상 작동 | | ⬜ |
| Edge | 최신 버전 | 정상 작동 | | ⬜ |
| Safari | 최신 버전 | 정상 작동 | | ⬜ |

---

## 7. 배포 전 체크리스트

### 7.1 코드 검토
- [ ] 모든 타입 에러 수정 완료
- [ ] LSP 에러 없음
- [ ] 임포트 에러 없음
- [ ] 코드 스타일 일관성

### 7.2 보안 검토
- [ ] .streamlit/secrets.toml .gitignore에 추가
- [ ] 비밀번호 모두 해싱됨
- [ ] SQL Injection 취약점 없음
- [ ] XSS 취약점 없음
- [ ] 개발자 도구 방지 작동

### 7.3 기능 검토
- [ ] 모든 CRUD 기능 작동
- [ ] 권한 분리 정상
- [ ] 에러 메시지 적절
- [ ] 대기자 시스템 작동

### 7.4 배포 준비
- [ ] pyproject.toml 의존성 완료
- [ ] README.md 작성 완료
- [ ] GitHub Repository Private 확인
- [ ] Streamlit Cloud 연동 준비

---

## 8. 버그 리포트

| ID | 항목 | 심각도 | 설명 | 상태 |
|----|------|--------|------|------|
| | | | | |

**심각도**: 높음/중간/낮음
**상태**: 신규/진행 중/해결 완료

---

## 9. 테스트 결과 요약

| 카테고리 | 전체 테스트 | 통과 | 실패 | 통과율 |
|----------|-------------|------|------|--------|
| 기능 테스트 | | | | |
| 보안 테스트 | | | | |
| 통합 테스트 | | | | |
| 성능 테스트 | | | | |
| 호환성 테스트 | | | | |
| **총계** | | | | |

---

## 10. 결론

### 10.1 테스트 평가
- 전체 품질: ⭐⭐⭐⭐⭐
- 주요 이슈: 없음 / [리스트]
- 배포 가능성: 예 / 아니오

### 10.2 권장 사항
- [ ] 2FA 도입 (Phase 2)
- [ ] 이메일 알림 (Phase 2)
- [ ] 로그 시스템 (Phase 2)

### 10.3 다음 단계
- Streamlit Cloud 배포
- 사용자 매뉴얼 작성
- 사용자 교육
